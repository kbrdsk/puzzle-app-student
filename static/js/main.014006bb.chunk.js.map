{"version":3,"sources":["login/user-context.js","login/index.js","puzzles/calcudoku/instructions.js","puzzles/calcudoku/instance.js","puzzles/calcudoku/index.js","puzzles/logic/instance.js","puzzles/logic/index.js","puzzles/light/instance.js","puzzles/light/index.js","puzzles/matchstick/vector-logic.js","puzzles/matchstick/canvas.js","puzzles/matchstick/instance.js","puzzles/matchstick/index.js","puzzles/index.js","home/index.js","puzzles/instance-list.js","puzzles/instance-router.js","index.js"],"names":["UserContext","React","createContext","user","setUser","Login","props","useState","first","setFirst","last","setLast","fetching","setFetching","badLogin","setBadLogin","useContext","updateName","updater","event","name","newName","target","value","replace","length","login","useCallback","create","a","studentData","uri","process","fetch","method","headers","body","JSON","stringify","response","ok","json","token","jwt","decode","student","sessionStorage","setItem","history","push","console","log","status","downHandler","key","useEffect","window","addEventListener","removeEventListener","className","htmlFor","type","id","onChange","bind","onClick","parsedOperations","example1","size","work","Array","fill","map","i","row","Math","floor","col","cages","example2","squares","operation","result","example3","values","Instructions","data","Instance","puzzleData","index","matchSquare","squareMatcher","entry","find","cage","neighbors","neighborList","isTopLeft","every","square","generateGrid","grid","activeSquare","setActiveSquare","classList","join","disabled","directions","Object","keys","dir","useMemo","sessionDataKey","sessionData","parse","getItem","setSize","setGrid","setCages","saveStatus","setSaveStatus","dburl","authorization","url","puzzleName","puzzleId","updateWork","sq","newSessionData","isNaN","includes","renderNumberSelect","number","match","some","isDuplicate","reducer","startVal","gridValues","val","b","gridvals","reduce","hasError","ListPreview","instanceList","instance","title","description","setDescription","setWork","updateTimer","setUpdateTimer","initializing","useRef","apiurl","current","clearHistoryListener","listen","setTimeout","clearTimeout","conditionalUpdater","timeInterval","setInterval","timer","clearInterval","e","placeholder","beginstate","neighborType","workPosition","setData","setWorkPosition","cols","rows","responseData","triggerSquare","updatedWork","slice","renderSquare","activatedNeighbors","filter","isactive","jumpTo","position","JumpBack","jump","StepBack","step","max","StepForward","min","JumpForward","xmlns","width","height","viewBox","toString","d","distanceFromSegment","point","vector","initial","terminal","orthogonal","x","y","initialLine","sum","terminalLine","distanceFromLine","distanceFromPoint","pointA","pointB","magnitude","difference","lineVector","pointVector","abs","vectorA","vectorB","scalarProduct","scalar","sqrt","Canvas","canvasRef","sticks","setSticks","selectionProximity","startingConfiguration","stickLength","stickWidth","activePoint","setActivePoint","activeStick","setActiveStick","mouseLoc","setMouseLoc","getMouseLoc","locationObject","rect","getBoundingClientRect","mouseLocation","clientX","left","clientY","top","getPointSelection","flatMap","stick","acc","distance","accDistance","Infinity","getStickSelection","selectPoint","selectedPoint","selectedStick","selectStick","pointDrag","adjustedVector","clearSelection","upHandler","draw","ctx","clearRect","beginPath","lineWidth","lineCap","strokeStyle","moveTo","lineTo","stroke","pointSelection","arc","PI","fillStyle","shadowBlur","shadowColor","stickSelection","context","getContext","ref","onTouchStart","touch","touches","touchLocation","onTouchEnd","onTouchMove","stickReference","adjustment","touchStickDrag","onMouseDown","onMouseUp","onMouseLeave","onMouseMove","movementX","movementY","mouseStickDrag","newWork","Reset","reset","resetWork","endpoint","puzzleList","calcudoku","logic","light","matchstick","potd","Home","POTD","renderPuzzleListing","POTDPreview","puzzle","List","puzzleType","string","char","toUpperCase","InstanceRouter","path","render","exact","createBrowserHistory","backArrowPath","Routes","sessionUser","defaultContext","fetchUserData","basename","Provider","ProfileBar","component","BackButton","renderPuzzleRoute","to","prevURL","location","href","capitalize","removeItem","instanceKey","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.014006bb.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const UserContext = React.createContext({\n\tuser: null,\n\tsetUser: () => {},\n});\n","import React, { useState, useContext, useEffect, useCallback } from \"react\";\nimport jwt from \"jsonwebtoken\";\nimport { UserContext } from \"./user-context\";\n\nexport default function Login(props) {\n\tconst [first, setFirst] = useState();\n\tconst [last, setLast] = useState();\n\tconst [fetching, setFetching] = useState(false);\n\tconst [badLogin, setBadLogin] = useState(false);\n\tconst { setUser } = useContext(UserContext);\n\n\tconst updateName = (updater, event) => {\n\t\tupdater((name) => {\n\t\t\tconst newName = event.target.value.replace(/[^a-zA-Z\\-']/, \"\");\n\t\t\treturn newName.length < 20 ? newName : name;\n\t\t});\n\t};\n\n\tconst login = useCallback(\n\t\tasync (create) => {\n\t\t\tif (!(first && last)) {\n\t\t\t\tsetBadLogin(\"missing name\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetFetching(create ? \"create\" : \"login\");\n\t\t\tconst studentData = { first, last };\n\t\t\tconst uri =\n\t\t\t\t`${process.env.REACT_APP_API_URL}/students` +\n\t\t\t\t(create ? \"\" : \"/login\");\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(uri, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(studentData),\n\t\t\t\t});\n\t\t\t\tsetFetching(false);\n\t\t\t\tif (response.ok) {\n\t\t\t\t\tsetBadLogin(false);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst token = (await response.json()).token;\n\t\t\t\t\t\tconst { student } = jwt.decode(token);\n\t\t\t\t\t\tconst user = { token, student };\n\t\t\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\t\t\"mcub-student-user\",\n\t\t\t\t\t\t\tJSON.stringify(user)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetUser(user);\n\t\t\t\t\t\tprops.history.push(\"/\");\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetBadLogin(response.status);\n\t\t\t\t\tconsole.log(\"HTTP error, status = \" + response.status);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tsetFetching(false);\n\t\t\t\tsetBadLogin(500);\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t},\n\t\t[first, last, props.history, setUser]\n\t);\n\n\tconst downHandler = useCallback(\n\t\t({ key }) => {\n\t\t\tif (key === \"Enter\") {\n\t\t\t\tlogin(false);\n\t\t\t}\n\t\t},\n\t\t[login]\n\t);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"keydown\", downHandler);\n\t\treturn () => window.removeEventListener(\"keydown\", downHandler);\n\t}, [downHandler]);\n\n\treturn (\n\t\t<div className=\"login-container\">\n\t\t\t<div className=\"login-window\">\n\t\t\t\t{fetching ? (\n\t\t\t\t\t<div className=\"fetching-indicator\">\n\t\t\t\t\t\t{fetching === \"create\"\n\t\t\t\t\t\t\t? \"Creating new user...\"\n\t\t\t\t\t\t\t: \"Logging in...\"}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t{badLogin ? (\n\t\t\t\t\t<p className=\"login-error\">\n\t\t\t\t\t\t{badLogin === 404\n\t\t\t\t\t\t\t? \"User not found. Please try again or create a new user.\"\n\t\t\t\t\t\t\t: badLogin === 403\n\t\t\t\t\t\t\t? \"User already exists.\"\n\t\t\t\t\t\t\t: badLogin === \"missing name\"\n\t\t\t\t\t\t\t? \"Please enter both your first and last name.\"\n\t\t\t\t\t\t\t: \"An error occurred, please try again.\"}\n\t\t\t\t\t</p>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"name-container first\">\n\t\t\t\t\t<label htmlFor=\"firstname\">First Name:</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"firstname\"\n\t\t\t\t\t\tid=\"firstname\"\n\t\t\t\t\t\tvalue={first}\n\t\t\t\t\t\tonChange={updateName.bind(null, setFirst)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"name-container last\">\n\t\t\t\t\t<label htmlFor=\"lastname\">Last Name:</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"lastname\"\n\t\t\t\t\t\tid=\"lastname\"\n\t\t\t\t\t\tvalue={last}\n\t\t\t\t\t\tonChange={updateName.bind(null, setLast)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"create-student\" onClick={() => login(true)}>\n\t\t\t\t\tCreate\n\t\t\t\t</button>\n\t\t\t\t<button className=\"login-student\" onClick={() => login(false)}>\n\t\t\t\t\tLog-In\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useState } from \"react\";\n\nconst parsedOperations = {\n\t\"-\": \"-\",\n\t\"+\": \"+\",\n\t\"*\": \"x\",\n\t\"/\": \"÷\",\n};\n\nconst example1 = {\n\tsize: 4,\n\twork: Array(16)\n\t\t.fill(null)\n\t\t.map((...[, i]) => {\n\t\t\tconst row = Math.floor(i / 4);\n\t\t\tconst col = i % 4;\n\t\t\tconst value = ((col + row) % 4) + 1;\n\t\t\treturn { row, col, value };\n\t\t}),\n\tcages: [],\n};\nconst example2 = {\n\tsize: 4,\n\twork: [\n\t\t{ col: 0, row: 0, value: 1 },\n\t\t{ col: 1, row: 0, value: 2 },\n\t\t{ col: 2, row: 0, value: 3 },\n\t\t{ col: 3, row: 0, value: 4 },\n\t\t{ col: 0, row: 2, value: 2 },\n\t\t{ col: 0, row: 3, value: 4 },\n\t\t{ col: 1, row: 3, value: 1 },\n\t\t{ col: 3, row: 3, value: 3 },\n\t\t{ col: 2, row: 1, value: 2 },\n\t\t{ col: 2, row: 2, value: 4 },\n\t],\n\tcages: [\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 0, row: 0 },\n\t\t\t\t{ col: 1, row: 0 },\n\t\t\t],\n\t\t\toperation: \"+\",\n\t\t\tresult: \"3\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 2, row: 0 },\n\t\t\t\t{ col: 3, row: 0 },\n\t\t\t],\n\t\t\toperation: \"-\",\n\t\t\tresult: \"1\",\n\t\t},\n\t\t{ squares: [{ col: 3, row: 3 }], operation: \"\", result: \"3\" },\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 0, row: 2 },\n\t\t\t\t{ col: 0, row: 3 },\n\t\t\t\t{ col: 1, row: 3 },\n\t\t\t],\n\t\t\toperation: \"*\",\n\t\t\tresult: \"8\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 2, row: 1 },\n\t\t\t\t{ col: 2, row: 2 },\n\t\t\t],\n\t\t\toperation: \"/\",\n\t\t\tresult: \"2\",\n\t\t},\n\t],\n};\nconst example3 = {\n\tsize: 4,\n\twork: Array(16)\n\t\t.fill(null)\n\t\t.map((...[, i]) => {\n\t\t\tconst values = [3, 2, 4, 1, 2, 1, 3, 4, 4, 3, 1, 2, 1, 4, 2, 3];\n\t\t\tconst row = Math.floor(i / 4);\n\t\t\tconst col = i % 4;\n\t\t\tconst value = values[i];\n\t\t\treturn { row, col, value };\n\t\t}),\n\tcages: [\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 0, row: 0 },\n\t\t\t\t{ col: 0, row: 1 },\n\t\t\t],\n\t\t\toperation: \"+\",\n\t\t\tresult: \"5\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 0, row: 2 },\n\t\t\t\t{ col: 0, row: 3 },\n\t\t\t\t{ col: 1, row: 3 },\n\t\t\t],\n\t\t\toperation: \"+\",\n\t\t\tresult: \"9\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 1, row: 0 },\n\t\t\t\t{ col: 1, row: 1 },\n\t\t\t\t{ col: 2, row: 0 },\n\t\t\t],\n\t\t\toperation: \"-\",\n\t\t\tresult: \"1\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 1, row: 2 },\n\t\t\t\t{ col: 2, row: 2 },\n\t\t\t],\n\t\t\toperation: \"+\",\n\t\t\tresult: \"4\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 2, row: 1 },\n\t\t\t\t{ col: 3, row: 0 },\n\t\t\t\t{ col: 3, row: 1 },\n\t\t\t],\n\t\t\toperation: \"-\",\n\t\t\tresult: \"0\",\n\t\t},\n\t\t{\n\t\t\tsquares: [\n\t\t\t\t{ col: 2, row: 3 },\n\t\t\t\t{ col: 3, row: 2 },\n\t\t\t\t{ col: 3, row: 3 },\n\t\t\t],\n\t\t\toperation: \"+\",\n\t\t\tresult: \"7\",\n\t\t},\n\t],\n};\n\nexport default function Instructions({ history }) {\n\treturn (\n\t\t<div className=\"calcudoku-instructions\">\n\t\t\t<h2>\n\t\t\t\tCalcudoku Instructions\n\t\t\t\t<hr />\n\t\t\t</h2>\n\n\t\t\t<p>\n\t\t\t\tThe goal of each puzzle is to fill the grid using only certain\n\t\t\t\tdigits –– 1 through 4 for a 4×4 grid, 1 through 5 for a 5×5,\n\t\t\t\tetc. –– so that no digit appears more than once in any row or\n\t\t\t\tany column.\n\t\t\t</p>\n\t\t\t<Instance data={example1} />\n\t\t\t<p>\n\t\t\t\tAdditionally, the grid is divided into heavily outlined groups\n\t\t\t\tof squares called “cages”. Each cage has a target number and an\n\t\t\t\toperation in its upper left corner. The numbers when the numbers\n\t\t\t\tin the cage are combined using the cage’s operation they must\n\t\t\t\tequal the target number.\n\t\t\t</p>\n\t\t\t<Instance data={example2} />\n\t\t\t<p>\n\t\t\t\tDigits may be repeated within a cage, as long as they are not in\n\t\t\t\tthe same row or column. No operation is relevant for a\n\t\t\t\tsingle-cell cage: placing the \"target\" in the cell is the only\n\t\t\t\tpossibility.\n\t\t\t</p>\n\t\t\t<Instance data={example3} />\n\t\t\t<p>\n\t\t\t\tBe careful that you know for sure that a number{\" \"}\n\t\t\t\t<strong>has</strong> to go in a square before you put it there.\n\t\t\t\tMaking a mistake early can cause trouble later on. Use lots of\n\t\t\t\tprocess of elimination!\n\t\t\t</p>\n\t\t\t<button\n\t\t\t\tclassName=\"try-it\"\n\t\t\t\tonClick={() => history.push(\"/calcudoku/4x4beginner1\")}\n\t\t\t>\n\t\t\t\tTry It!\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nfunction Instance({ data }) {\n\tconst { size } = data;\n\tconst [grid, setGrid] = useState(generateGrid(data));\n\tconst [activeSquare, setActiveSquare] = useState(null);\n\n\tconst renderSquare = (square) => {\n\t\tconst classList =\n\t\t\t\"calcudoku-square \" +\n\t\t\tsquare.neighbors.join(\" \") +\n\t\t\t(square === activeSquare ? \" active\" : \"\");\n\t\treturn (\n\t\t\t<div className={classList} onClick={() => setActiveSquare(square)}>\n\t\t\t\t<div className=\"cage-indicator\">\n\t\t\t\t\t{square.result}\n\t\t\t\t\t{square.operation}\n\t\t\t\t</div>\n\t\t\t\t<input type=\"number\" value={square.value || \"\"} disabled />\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst renderNumberSelect = (number) => {\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName=\"number-select\"\n\t\t\t\tkey={`num${number}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tactiveSquare.value = number;\n\t\t\t\t\tsetGrid([...grid]);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{number}\n\t\t\t</button>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{grid ? (\n\t\t\t\t<div className=\"puzzle-container instructions\" size={size}>\n\t\t\t\t\t<div className=\"grid-container\" size={size}>\n\t\t\t\t\t\t{grid.map(renderSquare)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*\n\t\t\t\t\t<div className=\"number-select-container\">\n\t\t\t\t\t\t{new Array(size)\n\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t.map((...[, number]) =>\n\t\t\t\t\t\t\t\trenderNumberSelect(number + 1)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</div>*/}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nfunction generateGrid(puzzleData) {\n\tconst { size, cages, work } = puzzleData;\n\tconst squares = Array(size ** 2).fill(null);\n\treturn squares.map((...[, index]) => {\n\t\tconst col = Math.floor(index / size);\n\t\tconst row = index % size;\n\t\tconst matchSquare = squareMatcher({ col, row });\n\t\tconst entry = work.find(matchSquare);\n\t\tconst value = entry ? entry.value : null;\n\t\tconst cage = cages.find((cage) => cage.squares.find(matchSquare));\n\t\tconst neighbors = neighborList({ col, row }, cage);\n\t\tif (!cage) return { col, row, value, neighbors };\n\t\tconst isTopLeft = cage.squares.every(\n\t\t\t(square) =>\n\t\t\t\tsquare.col >= col && (square.row >= row || square.col > col)\n\t\t);\n\t\tconst result = isTopLeft ? cage.result : null;\n\t\tconst operation = isTopLeft ? parsedOperations[cage.operation] : null;\n\t\treturn { col, row, value, neighbors, result, operation };\n\t});\n}\n\nfunction neighborList(square, cage) {\n\tconst neighbors = [];\n\tconst directions = {\n\t\t\"n-up\": { col: square.col - 1, row: square.row },\n\t\t\"n-down\": { col: square.col + 1, row: square.row },\n\t\t\"n-left\": { col: square.col, row: square.row - 1 },\n\t\t\"n-right\": { col: square.col, row: square.row + 1 },\n\t};\n\n\tif (!cage) return Object.keys(directions);\n\n\tfor (let dir in directions) {\n\t\tconst matchSquare = squareMatcher(directions[dir]);\n\t\tif (cage.squares.find(matchSquare)) {\n\t\t\tneighbors.push(dir);\n\t\t}\n\t}\n\n\treturn neighbors;\n}\n\nfunction squareMatcher({ col, row }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n","import React, { useState, useEffect, useContext, useMemo } from \"react\";\nimport { UserContext } from \"../../login/user-context\";\n\nconst parsedOperations = {\n\t\"-\": \"-\",\n\t\"+\": \"+\",\n\t\"*\": \"x\",\n\t\"/\": \"÷\",\n};\n\nexport default function Instance(props) {\n\tconst name = useMemo(() => props.name, [props.name]);\n\tconst sessionDataKey = useMemo(() => `calcudoku-instance-data-${name}`, [\n\t\tname,\n\t]);\n\tconst sessionData = useMemo(\n\t\t() => JSON.parse(sessionStorage.getItem(sessionDataKey)),\n\t\t[sessionDataKey]\n\t);\n\tconst [size, setSize] = useState(sessionData ? sessionData.size : null);\n\tconst [grid, setGrid] = useState(\n\t\tsessionData ? generateGrid(sessionData) : null\n\t);\n\tconst [cages, setCages] = useState(sessionData ? sessionData.cages : null);\n\tconst [activeSquare, setActiveSquare] = useState(null);\n\tconst [saveStatus, setSaveStatus] = useState(sessionData ? \"saved\" : null);\n\tconst {\n\t\tuser: { token },\n\t} = useContext(UserContext);\n\tconst dburl = `${process.env.REACT_APP_API_URL}/puzzles/calcudoku/${name}`;\n\n\tuseEffect(() => {\n\t\tif (!sessionData) {\n\t\t\t(async () => {\n\t\t\t\tconst response = await fetch(dburl, {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: { authorization: token },\n\t\t\t\t});\n\t\t\t\tif (response.ok) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\t\tsessionDataKey,\n\t\t\t\t\t\t\tJSON.stringify(data)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetSize(data.size);\n\t\t\t\t\t\tsetGrid(generateGrid(data));\n\t\t\t\t\t\tsetCages(data.cages);\n\t\t\t\t\t\tsetSaveStatus(\"saved\");\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tsetGrid([]);\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t\t\t})();\n\t\t}\n\t}, [dburl, token, sessionData, sessionDataKey]);\n\n\tuseEffect(() => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}/activepuzzle`;\n\t\t(async () => {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpuzzleName: \"calcudoku\",\n\t\t\t\t\tpuzzleId: name,\n\t\t\t\t}),\n\t\t\t});\n\t\t})();\n\n\t\treturn () => {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\t}, [token, name]);\n\n\tconst updateWork = async () => {\n\t\tsetSaveStatus(\"saving\");\n\t\tconst work = grid.map((sq) => {\n\t\t\treturn { col: sq.col, row: sq.row, value: sq.value };\n\t\t});\n\n\t\tconst response = await fetch(dburl, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tauthorization: token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({ puzzleData: work }),\n\t\t});\n\n\t\tconst newSessionData = JSON.parse(\n\t\t\tsessionStorage.getItem(sessionDataKey)\n\t\t);\n\t\tnewSessionData.work = work;\n\t\tsessionStorage.setItem(sessionDataKey, JSON.stringify(newSessionData));\n\n\t\tif (response.ok) setSaveStatus(\"saved\");\n\t\telse setSaveStatus(\"error\");\n\t};\n\n\tconst downHandler = ({ key }) => {\n\t\tif (activeSquare) {\n\t\t\tif (!isNaN(key) && 1 <= key && key <= size) {\n\t\t\t\tactiveSquare.value = key;\n\t\t\t} else {\n\t\t\t\tconst { col, row } = activeSquare;\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase \"Backspace\":\n\t\t\t\t\tcase \"Delete\":\n\t\t\t\t\t\tactiveSquare.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\t\tsetActiveSquare(\n\t\t\t\t\t\t\tgrid.find(squareMatcher({ col: col - 1, row })) ||\n\t\t\t\t\t\t\t\tactiveSquare\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\t\tsetActiveSquare(\n\t\t\t\t\t\t\tgrid.find(squareMatcher({ col: col + 1, row })) ||\n\t\t\t\t\t\t\t\tactiveSquare\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\t\tsetActiveSquare(\n\t\t\t\t\t\t\tgrid.find(squareMatcher({ col, row: row - 1 })) ||\n\t\t\t\t\t\t\t\tactiveSquare\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\t\tsetActiveSquare(\n\t\t\t\t\t\t\tgrid.find(squareMatcher({ col, row: row + 1 })) ||\n\t\t\t\t\t\t\t\tactiveSquare\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetGrid([...grid]);\n\t\t\tupdateWork();\n\t\t} else if (\n\t\t\t[\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(key)\n\t\t) {\n\t\t\tsetActiveSquare(grid.find(squareMatcher({ col: 0, row: 0 })));\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"keydown\", downHandler);\n\t\treturn () => window.removeEventListener(\"keydown\", downHandler);\n\t});\n\n\tconst renderSquare = (square) => {\n\t\tconst matchSquare = squareMatcher(square);\n\t\tconst cage =\n\t\t\tsquare.result && cages\n\t\t\t\t? cages.find((cage) => cage.squares.find(matchSquare))\n\t\t\t\t: null;\n\t\tconst classList =\n\t\t\t\"calcudoku-square \" +\n\t\t\tsquare.neighbors.join(\" \") +\n\t\t\t(square === activeSquare ? \" active\" : \"\") +\n\t\t\t(name.match(\"4x4beginner1\") && isDuplicate(grid, square)\n\t\t\t\t? \" duplicate\"\n\t\t\t\t: \"\") +\n\t\t\t((name.match(\"4x4beginner1\") || name.match(\"4x4beginner2\")) &&\n\t\t\tcage &&\n\t\t\thasError(grid, cage)\n\t\t\t\t? \" cageError\"\n\t\t\t\t: \"\");\n\t\treturn (\n\t\t\t<div className={classList} onClick={() => setActiveSquare(square)}>\n\t\t\t\t<div className=\"cage-indicator\">\n\t\t\t\t\t{square.result}\n\t\t\t\t\t{square.operation}\n\t\t\t\t</div>\n\t\t\t\t<input type=\"number\" value={square.value || \"\"} disabled />\n\t\t\t\t<div className=\"selector\"></div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst renderNumberSelect = (number) => {\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName=\"number-select\"\n\t\t\t\tkey={`num${number}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tactiveSquare.value = number;\n\t\t\t\t\tsetGrid([...grid]);\n\t\t\t\t\tupdateWork();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{number}\n\t\t\t</button>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{grid ? (\n\t\t\t\t<div className=\"puzzle-container\" size={size}>\n\t\t\t\t\t<div className=\"saving-indicator\">\n\t\t\t\t\t\t{saveStatus === \"saving\"\n\t\t\t\t\t\t\t? \"Saving...\"\n\t\t\t\t\t\t\t: saveStatus === \"error\"\n\t\t\t\t\t\t\t? \"An error occurred while saving.\"\n\t\t\t\t\t\t\t: saveStatus === \"saved\"\n\t\t\t\t\t\t\t? \"Saved.\"\n\t\t\t\t\t\t\t: \" \"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"grid-container\" size={size}>\n\t\t\t\t\t\t{grid.map(renderSquare)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"number-select-container\">\n\t\t\t\t\t\t{new Array(size)\n\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t.map((...[, number]) =>\n\t\t\t\t\t\t\t\trenderNumberSelect(number + 1)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<h2 className=\"loading-indicator\">Loading...</h2>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction generateGrid(puzzleData) {\n\tconst { size, cages, work } = puzzleData;\n\tconst squares = Array(size ** 2).fill(null);\n\treturn squares.map((...[, index]) => {\n\t\tconst col = Math.floor(index / size);\n\t\tconst row = index % size;\n\t\tconst matchSquare = squareMatcher({ col, row });\n\t\tconst entry = work.find(matchSquare);\n\t\tconst cage = cages.find((cage) => cage.squares.find(matchSquare));\n\t\tconst neighbors = neighborList({ col, row }, cage);\n\t\tconst isTopLeft = cage.squares.every(\n\t\t\t(square) =>\n\t\t\t\tsquare.col >= col && (square.row >= row || square.col > col)\n\t\t);\n\t\tconst result = isTopLeft ? cage.result : null;\n\t\tconst operation = isTopLeft ? parsedOperations[cage.operation] : null;\n\t\tconst value = entry ? entry.value : null;\n\t\treturn { col, row, value, neighbors, result, operation };\n\t});\n}\n\nfunction neighborList(square, cage) {\n\tconst neighbors = [];\n\tconst directions = {\n\t\t\"n-up\": { col: square.col - 1, row: square.row },\n\t\t\"n-down\": { col: square.col + 1, row: square.row },\n\t\t\"n-left\": { col: square.col, row: square.row - 1 },\n\t\t\"n-right\": { col: square.col, row: square.row + 1 },\n\t};\n\n\tfor (let dir in directions) {\n\t\tconst matchSquare = squareMatcher(directions[dir]);\n\t\tif (cage.squares.find(matchSquare)) {\n\t\t\tneighbors.push(dir);\n\t\t}\n\t}\n\n\treturn neighbors;\n}\n\nfunction squareMatcher({ col, row }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n\nfunction isDuplicate(grid, { col, row, value }) {\n\treturn grid.some(\n\t\t(square) =>\n\t\t\t(square.row === row || square.col === col) &&\n\t\t\t!(square.row === row && square.col === col) &&\n\t\t\tsquare.value === value\n\t);\n}\n\nfunction hasError(grid, { squares, operation, result }) {\n\tconst gridValues = squares.map(\n\t\t(square) => +grid.find(squareMatcher(square)).value\n\t);\n\tif (gridValues.some((val) => !val)) return false;\n\tlet reducer, startVal;\n\tswitch (operation) {\n\t\tcase \"+\":\n\t\t\tstartVal = 0;\n\t\t\treducer = (index) => (a, b) => a + b;\n\t\t\tbreak;\n\t\tcase \"-\":\n\t\t\tstartVal = 0;\n\t\t\treducer = (index) => (a, b, i) => (i === index ? a + b : a - b);\n\t\t\tbreak;\n\t\tcase \"*\":\n\t\t\tstartVal = 1;\n\t\t\treducer = (index) => (a, b) => a * b;\n\t\t\tbreak;\n\t\tcase \"/\":\n\t\t\tstartVal = 1;\n\t\t\treducer = (index) => (a, b, i) => (i === index ? a * b : a / b);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tstartVal = 0;\n\t\t\treducer = (index) => (a, b) => b;\n\t}\n\tconst results = gridValues.map((val, index, gridvals) =>\n\t\tgridvals.reduce(reducer(index), startVal)\n\t);\n\n\treturn !results.includes(+result);\n}\n","import React from \"react\";\nimport Instructions from \"./instructions\";\nimport Instance from \"./instance\";\n\nconst name = \"Calcudokus\";\nconst id = \"calcudoku\";\n\nfunction ListPreview() {\n\treturn <div className=\"list-preview\">Find all calcudokus here</div>;\n}\n\nconst instanceList = [\n\t{ instance: \"instructions\", title: \"Instructions\" },\n\t{ instance: \"4x4beginner1\", title: \"4x4 Beginner 1\" },\n\t{ instance: \"4x4beginner2\", title: \"4x4 Beginner 2\" },\n\t{ instance: \"4x4beginner3\", title: \"4x4 Beginner 3\" },\n\t{ instance: \"4x4intermediate1\", title: \"4x4 Intermediate 1\" },\n\t{ instance: \"4x4intermediate2\", title: \"4x4 Intermediate 2\" },\n\t{ instance: \"4x4expert1\", title: \"4x4 Expert 1\" },\n\t{ instance: \"5x5beginner1\", title: \"5x5 Beginner 1\" },\n];\n\nexport { name, id, ListPreview, Instructions, Instance, instanceList };\n","import React, {\n\tuseState,\n\tuseEffect,\n\tuseContext,\n\tuseCallback,\n\tuseMemo,\n\tuseRef,\n} from \"react\";\nimport { UserContext } from \"../../login/user-context\";\n\nexport default function Instance(props) {\n\tconst name = useMemo(() => props.name, [props.name]);\n\tconst sessionDataKey = useMemo(() => `logic-instance-data-${name}`, [name]);\n\tconst [description, setDescription] = useState(\"\");\n\tconst [work, setWork] = useState(\"\");\n\tconst [saveStatus, setSaveStatus] = useState(null);\n\tconst [updateTimer, setUpdateTimer] = useState(30);\n\tconst initializing = useRef(true);\n\tconst {\n\t\tuser: { token },\n\t} = useContext(UserContext);\n\tconst apiurl = `${process.env.REACT_APP_API_URL}/puzzles/logic/${name}`;\n\n\tuseMemo(() => {\n\t\tconst sessionData = JSON.parse(sessionStorage.getItem(sessionDataKey));\n\n\t\tif (sessionData) {\n\t\t\tsetDescription(sessionData.description);\n\t\t\tsetWork(sessionData.work);\n\t\t\tsetSaveStatus(\"saved\");\n\t\t\treturn;\n\t\t}\n\n\t\t(async () => {\n\t\t\tconst response = await fetch(apiurl, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { authorization: token },\n\t\t\t});\n\t\t\tif (response.ok) {\n\t\t\t\ttry {\n\t\t\t\t\tconst { description, work } = await response.json();\n\t\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\tsessionDataKey,\n\t\t\t\t\t\tJSON.stringify({ description, work })\n\t\t\t\t\t);\n\t\t\t\t\tsetDescription(description);\n\t\t\t\t\tsetWork(work);\n\t\t\t\t\tsetSaveStatus(\"saved\");\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t\t})();\n\t}, [apiurl, token, setWork, sessionDataKey]);\n\n\tuseEffect(() => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}/activepuzzle`;\n\t\t(async () => {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpuzzleName: \"logic\",\n\t\t\t\t\tpuzzleId: name,\n\t\t\t\t}),\n\t\t\t});\n\t\t})();\n\n\t\treturn () => {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\t}, [token, name]);\n\n\tconst updateWork = useCallback(async () => {\n\t\tsetSaveStatus(\"saving\");\n\t\tconst response = await fetch(apiurl, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tauthorization: token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({ puzzleData: work }),\n\t\t});\n\n\t\tconst newSessionData = JSON.parse(\n\t\t\tsessionStorage.getItem(sessionDataKey)\n\t\t);\n\t\tnewSessionData.work = work;\n\t\tsessionStorage.setItem(sessionDataKey, JSON.stringify(newSessionData));\n\n\t\tif (response.ok) setSaveStatus(\"saved\");\n\t\telse setSaveStatus(\"error\");\n\t}, [token, work, apiurl, sessionDataKey]);\n\n\tuseEffect(() => {\n\t\tif (initializing.current) return (initializing.current = false);\n\t\tsetSaveStatus(null);\n\t\tconst clearHistoryListener = props.history.listen(updateWork);\n\t\tconst updateTimer = setTimeout(updateWork, 3000);\n\t\treturn () => {\n\t\t\tclearTimeout(updateTimer);\n\t\t\tclearHistoryListener();\n\t\t};\n\t}, [updateWork, props.history, setSaveStatus, initializing]);\n\n\tuseEffect(() => {\n\t\tconst conditionalUpdater = () => {\n\t\t\tif(saveStatus !== \"saved\") updateWork();\n\t\t}\n\t\twindow.addEventListener(\"beforeunload\", conditionalUpdater);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"beforeunload\", conditionalUpdater);\n\t\t};\n\t}, [updateWork, saveStatus]);\n\n\tuseEffect(() => {\n\t\tif (updateTimer === 0) {\n\t\t\tsetUpdateTimer(30);\n\t\t\tif (!saveStatus) updateWork();\n\t\t}\n\t}, [updateTimer, updateWork, saveStatus]);\n\n\tuseEffect(() => {\n\t\tconst timeInterval = setInterval(\n\t\t\t() => setUpdateTimer((timer) => timer - 1),\n\t\t\t1000\n\t\t);\n\t\treturn () => clearInterval(timeInterval);\n\t}, [setUpdateTimer]);\n\n\treturn description ? (\n\t\t<div className=\"logic instance\">\n\t\t\t<p className=\"puzzle-description\">{description}</p>\n\t\t\t<textarea\n\t\t\t\tclassName=\"work\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tsetWork(e.target.value);\n\t\t\t\t\t//updateWork();\n\t\t\t\t}}\n\t\t\t\tvalue={work}\n\t\t\t\tplaceholder=\"Enter your solution or any notes here!\"\n\t\t\t/>\n\t\t\t<div className=\"saving-indicator\">\n\t\t\t\t{saveStatus === \"saving\"\n\t\t\t\t\t? \"Saving...\"\n\t\t\t\t\t: saveStatus === \"error\"\n\t\t\t\t\t? \"An error occurred while saving.\"\n\t\t\t\t\t: saveStatus === \"saved\"\n\t\t\t\t\t? \"Saved.\"\n\t\t\t\t\t: \" \"}\n\t\t\t</div>\n\t\t</div>\n\t) : (\n\t\t<h2 className=\"loading-indicator\">Loading...</h2>\n\t);\n}\n","import React from \"react\";\nimport Instance from \"./instance\";\n\nconst name = \"Logic Puzzles\";\nconst id = \"logic\";\n\nfunction ListPreview() {\n\treturn <div className=\"list-preview\">Find all logic puzzles here</div>;\n}\n\nconst instanceList = [\n\t{ instance: \"wolfgoatcabbage\", title: \"Wolf, Goat, Cabbage\" },\n\t{ instance: \"torch\", title: \"Bridge & Torch\" },\n\t{ instance: \"goldboxes\", title: \"Find the Gold\" },\n\t{ instance: \"10coins\", title: \"10 Coins\" },\n\t{ instance: \"socks\", title: \"Cathy's Socks\" },\n\t{\n\t\tinstance: \"childrenboat\",\n\t\ttitle: \"2 Adults, 2 Children, a Boat, and a River\",\n\t},\n\t{ instance: \"applesandoranges\", title: \"Apples & Oranges\" },\n\t{ instance: \"averybobbycam\", title: \"Avery, Bobby, & Cam\" },\n\t{ instance: \"bear\", title: \"Bear\" },\n\t{ instance: \"hats\", title: \"Hats\" },\n];\n\nexport { name, id, ListPreview, Instance, instanceList };\n","import React, { useState, useMemo, useContext, useEffect } from \"react\";\nimport { UserContext } from \"../../login/user-context\";\n\nexport default function Instance(props) {\n\tconst name = useMemo(() => props.name, [props.name]);\n\tconst sessionDataKey = useMemo(() => `light-instance-data-${name}`, [name]);\n\tconst sessionData = useMemo(\n\t\t() => JSON.parse(sessionStorage.getItem(sessionDataKey)),\n\t\t[sessionDataKey]\n\t);\n\tconst [data, setData] = useState(\n\t\tsessionData\n\t\t\t? sessionData\n\t\t\t: {\n\t\t\t\t\tsize: {},\n\t\t\t\t\twork: [],\n\t\t\t\t\tbeginstate: [],\n\t\t\t\t\tneighborType: \"+\",\n\t\t\t\t\tworkPosition: 0,\n\t\t\t  }\n\t);\n\tconst [work, setWork] = useState(data.work);\n\tconst [workPosition, setWorkPosition] = useState(data.workPosition || 0);\n\tconst {\n\t\tsize: { cols, rows },\n\t\tbeginstate,\n\t\tneighborType,\n\t} = data;\n\tconst [saveStatus, setSaveStatus] = useState(sessionData ? \"saved\" : null);\n\tconst {\n\t\tuser: { token },\n\t} = useContext(UserContext);\n\tconst apiurl = `${process.env.REACT_APP_API_URL}/puzzles/light/${name}`;\n\n\tuseEffect(() => {\n\t\tif (!sessionData) {\n\t\t\t(async () => {\n\t\t\t\tconst response = await fetch(apiurl, {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: { authorization: token },\n\t\t\t\t});\n\t\t\t\tif (response.ok) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst responseData = await response.json();\n\t\t\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\t\tsessionDataKey,\n\t\t\t\t\t\t\tJSON.stringify(responseData)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetData(responseData);\n\t\t\t\t\t\tsetWork(responseData.work);\n\t\t\t\t\t\tsetSaveStatus(\"saved\");\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t\t\t})();\n\t\t}\n\t}, [apiurl, token, sessionData, sessionDataKey]);\n\n\tuseEffect(() => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}/activepuzzle`;\n\t\t(async () => {\n\t\t\tawait fetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpuzzleName: \"light\",\n\t\t\t\t\tpuzzleId: name,\n\t\t\t\t}),\n\t\t\t});\n\t\t})();\n\n\t\treturn () => {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\t}, [token, name]);\n\n\tconst updateWork = async (work) => {\n\t\tsetSaveStatus(\"saving\");\n\t\tconst response = await fetch(apiurl, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tauthorization: token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({ puzzleData: work }),\n\t\t});\n\n\t\tconst newSessionData = JSON.parse(\n\t\t\tsessionStorage.getItem(sessionDataKey)\n\t\t);\n\t\tnewSessionData.work = work;\n\t\tnewSessionData.workPosition = work.length;\n\t\tsessionStorage.setItem(sessionDataKey, JSON.stringify(newSessionData));\n\n\t\tif (response.ok) setSaveStatus(\"saved\");\n\t\telse setSaveStatus(\"error\");\n\t};\n\n\tconst neighborList = ({ row, col }) => {\n\t\tswitch (neighborType) {\n\t\t\tcase \"x\":\n\t\t\t\treturn [\n\t\t\t\t\t{ row: row - 1, col: col - 1 },\n\t\t\t\t\t{ row: row + 1, col: col + 1 },\n\t\t\t\t\t{ row: row + 1, col: col - 1 },\n\t\t\t\t\t{ row: row - 1, col: col + 1 },\n\t\t\t\t\t{ row, col },\n\t\t\t\t];\n\t\t\tdefault:\n\t\t\t\treturn [\n\t\t\t\t\t{ row: row - 1, col },\n\t\t\t\t\t{ row: row + 1, col },\n\t\t\t\t\t{ row, col: col - 1 },\n\t\t\t\t\t{ row, col: col + 1 },\n\t\t\t\t\t{ row, col },\n\t\t\t\t];\n\t\t}\n\t};\n\n\tconst triggerSquare = (square) => {\n\t\tconst updatedWork = [...work.slice(0, workPosition), square];\n\t\tsetWorkPosition(workPosition + 1);\n\t\tsetWork(updatedWork);\n\t\tupdateWork(updatedWork);\n\t};\n\n\tconst renderSquare = (row, ...[, col]) => {\n\t\tconst neighbors = neighborList({ row, col });\n\t\tconst activatedNeighbors = work\n\t\t\t.slice(0, workPosition)\n\t\t\t.filter((square) => neighbors.some(squareMatcher(square)));\n\t\tconst isactive =\n\t\t\t(activatedNeighbors.length +\n\t\t\t\t(beginstate.some(squareMatcher({ row, col })) ? 1 : 0)) %\n\t\t\t\t2 >\n\t\t\t0;\n\t\tconst classList = `light-square ${isactive ? \"active\" : \"inactive\"}`;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classList}\n\t\t\t\tonClick={() => triggerSquare({ row, col })}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst renderRow = (...[, index]) => {\n\t\treturn (\n\t\t\t<div className=\"grid-row\">\n\t\t\t\t{Array(cols).fill(null).map(renderSquare.bind(null, index))}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst jumpTo = (position) => {\n\t\tsetWorkPosition(position);\n\t\tconst newSessionData = JSON.parse(\n\t\t\tsessionStorage.getItem(sessionDataKey)\n\t\t);\n\t\tnewSessionData.workPosition = position;\n\t\tsessionStorage.setItem(sessionDataKey, JSON.stringify(newSessionData));\n\t};\n\n\treturn (\n\t\t<div className=\"light-puzzle-container\">\n\t\t\t<div className=\"light-grid\" cols={cols} rows={rows}>\n\t\t\t\t{new Array(rows).fill(null).map(renderRow)}\n\t\t\t</div>\n\t\t\t<div className=\"controller\">\n\t\t\t\t<JumpBack jump={() => jumpTo(0)} isactive={workPosition > 0} />\n\t\t\t\t<StepBack\n\t\t\t\t\tstep={() => jumpTo(Math.max(workPosition - 1, 0))}\n\t\t\t\t\tisactive={workPosition > 0}\n\t\t\t\t/>\n\t\t\t\t<StepForward\n\t\t\t\t\tstep={() => jumpTo(Math.min(workPosition + 1, work.length))}\n\t\t\t\t\tisactive={workPosition < work.length}\n\t\t\t\t/>\n\t\t\t\t<JumpForward\n\t\t\t\t\tjump={() => jumpTo(work.length)}\n\t\t\t\t\tisactive={workPosition < work.length}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"saving-indicator\">\n\t\t\t\t{saveStatus === \"saving\"\n\t\t\t\t\t? \"Saving...\"\n\t\t\t\t\t: saveStatus === \"error\"\n\t\t\t\t\t? \"An error occurred while saving.\"\n\t\t\t\t\t: saveStatus === \"saved\"\n\t\t\t\t\t? \"Saved.\"\n\t\t\t\t\t: \" \"}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction squareMatcher({ row, col }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n\nfunction StepBack({ step, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={step}\n\t\t\tclassName=\"step back nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1344 576v896q0 26-19 45t-45\n\t\t\t\t19-45-19l-448-448q-19-19-19-45t19-45l448-448q19-19 45-19t45 19\n\t\t\t\t19 45z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction JumpBack({ jump, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={jump}\n\t\t\tclassName=\"jump back nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1811 269q19-19 32-13t13 32v1472q0 \n\t\t\t26-13 32t-32-13l-710-710q-8-9-13-19v710q0 \n\t\t\t26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19 \n\t\t\t32-13t13 32v710q5-11 13-19z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction StepForward({ step, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={step}\n\t\t\tclassName=\"step forward nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1280 1024q0 26-19 45l-448 448q-19 19-45 \n\t\t\t\t19t-45-19-19-45v-896q0-26 19-45t45-19 45 \n\t\t\t\t19l448 448q19 19 19 45z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction JumpForward({ jump, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={jump}\n\t\t\tclassName=\"jump forward nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M237 1779q-19 19-32 13t-13-32v-1472q0-26 13-32t32 13l710 \n\t\t\t\t710q8 8 13 19v-710q0-26 13-32t32 13l710 710q19 19 19 45t-19 \n\t\t\t\t45l-710 710q-19 19-32 13t-13-32v-710q-5 10-13 19z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from \"react\";\nimport Instance from \"./instance\";\n\nconst name = \"Light Puzzles\";\nconst id = \"light\";\n\nfunction ListPreview() {\n\treturn <div className=\"list-preview\">Find all light puzzles here</div>;\n}\n\nconst instanceList = [\n\t{ instance: \"beginner1\", title: \"Beginner 1\" },\n\t{ instance: \"beginner2\", title: \"Beginner 2\" },\n\t{ instance: \"beginner3\", title: \"Beginner 3\" },\n\t{ instance: \"beginner4\", title: \"Beginner 4\" },\n\t{ instance: \"beginner5\", title: \"Beginner 5\" },\n\t{ instance: \"intermediate1\", title: \"Intermediate 1\" },\n\t{ instance: \"intermediate2\", title: \"Intermediate 2\" },\n\t{ instance: \"intermediate3\", title: \"Intermediate 3\" },\n\t{ instance: \"intermediate4\", title: \"Intermediate 4\" },\n\t{ instance: \"intermediate5\", title: \"Intermediate 5\" },\n\t{ instance: \"expert1\", title: \"Expert 1\" },\n\t{ instance: \"expert2\", title: \"Expert 2\" },\n\t{ instance: \"expert3\", title: \"Expert 3\" },\n];\n\nexport { name, id, ListPreview, Instance, instanceList };\n","function orthogonalVector(vector) {\n  return { x: vector.y, y: -vector.x };\n}\n\nexport function distanceFromSegment(point, [initial, terminal]) {\n  const orthogonal = orthogonalVector({\n    x: terminal.x - initial.x,\n    y: terminal.y - initial.y,\n  });\n  const initialLine = [initial, sum(initial, orthogonal)];\n  const terminalLine = [terminal, sum(terminal, orthogonal)];\n  const isBetweenEndpoints =\n    distanceFromLine(point, initialLine) +\n      distanceFromLine(point, terminalLine) <=\n    distanceFromPoint(initial, terminal) + 1;\n\n  const distance = isBetweenEndpoints\n    ? distanceFromLine(point, [initial, terminal])\n    : Math.min(\n        distanceFromPoint(point, initial),\n        distanceFromPoint(point, terminal)\n      );\n  return distance;\n}\n\nexport function distanceFromPoint(pointA, pointB) {\n  return magnitude(difference(pointA, pointB));\n}\n\nfunction distanceFromLine(point, [initial, terminal]) {\n  const lineVector = difference(initial, terminal);\n  const pointVector = difference(point, initial);\n  return (\n    Math.abs(lineVector.x * pointVector.y - lineVector.y * pointVector.x) /\n    magnitude(lineVector)\n  );\n}\n\nexport function difference(vectorA, vectorB) {\n  return { x: vectorA.x - vectorB.x, y: vectorA.y - vectorB.y };\n}\n\nexport function sum(vectorA, vectorB) {\n  return { x: vectorA.x + vectorB.x, y: vectorA.y + vectorB.y };\n}\n\nexport function scalarProduct(vector, scalar) {\n  return { x: vector.x * scalar, y: vector.y * scalar };\n}\n\nexport function magnitude(vector) {\n  return Math.sqrt(vector.x ** 2 + vector.y ** 2);\n}\n\nfunction dotProduct(vector1, vector2) {\n  return vector1.x * vector2.x + vector1.y * vector2.y;\n}","import React, { useRef, useState, useEffect, useCallback } from \"react\";\nimport {\n  distanceFromSegment,\n  distanceFromPoint,\n  sum,\n  scalarProduct,\n  magnitude,\n  difference,\n} from \"./vector-logic\";\n\nexport default function Canvas(props) {\n  const canvasRef = useRef(null);\n  const { puzzleData, sticks, setSticks, updateWork } = props;\n  const {\n    height,\n    width,\n    selectionProximity,\n    startingConfiguration,\n    stickLength,\n    stickWidth,\n  } = puzzleData;\n  const [activePoint, setActivePoint] = useState(null);\n  const [activeStick, setActiveStick] = useState(null);\n  const [mouseLoc, setMouseLoc] = useState({ x: 0, y: 0 });\n\n  const getMouseLoc = (e, locationObject = e) => {\n    const rect = e.target.getBoundingClientRect();\n    const mouseLocation = {\n      x: ((locationObject.clientX - rect.left) / rect.width) * width,\n      y: ((locationObject.clientY - rect.top) / rect.height) * height,\n    };\n    setMouseLoc(mouseLocation);\n    return mouseLocation;\n  };\n\n  const getPointSelection = useCallback(\n    (mouseLocation) => {\n      const points = sticks.flatMap((stick) => stick);\n      return points.reduce(\n        (acc, point) => {\n          const distance = distanceFromPoint(point, mouseLocation);\n          const accDistance = acc\n            ? distanceFromPoint(mouseLocation, acc)\n            : Infinity;\n          return distance < Math.min(accDistance, selectionProximity)\n            ? point\n            : acc;\n        },\n\n        null\n      );\n    },\n    [sticks, selectionProximity]\n  );\n\n  const getStickSelection = useCallback(\n    (mouseLocation) =>\n      sticks.reduce(\n        (acc, stick) =>\n          distanceFromSegment(mouseLocation, stick) <\n          Math.min(\n            acc ? distanceFromSegment(mouseLocation, acc) : Infinity,\n            selectionProximity\n          )\n            ? stick\n            : acc,\n        null\n      ),\n    [sticks, selectionProximity]\n  );\n\n  const selectPoint = (mouseLocation) => {\n    const selectedPoint = getPointSelection(mouseLocation);\n    if (selectedPoint) {\n      const selectedStick = sticks.find((stick) =>\n        stick.includes(selectedPoint)\n      );\n      setActivePoint(selectedPoint);\n      setActiveStick(selectedStick);\n      return selectedPoint;\n    }\n  };\n\n  const selectStick = (mouseLocation) => {\n    const selectedStick = getStickSelection(mouseLocation);\n    setActiveStick(selectedStick);\n    return selectedStick;\n  };\n\n  const select = (mouseLocation) => {\n    const selectedPoint = selectPoint(mouseLocation);\n    if (!selectedPoint) {\n      selectStick(mouseLocation);\n    }\n  };\n\n  const pointDrag = (mouseLocation) => {\n    if (activePoint) {\n      const initial = activeStick.find((point) => point !== activePoint);\n      const vector = difference(mouseLocation, initial);\n      const adjustedVector = scalarProduct(\n        vector,\n        stickLength / magnitude(vector)\n      );\n      activePoint.x = initial.x + adjustedVector.x;\n      activePoint.y = initial.y + adjustedVector.y;\n      setSticks([...sticks]);\n    }\n  };\n\n  const mouseStickDrag = (e) => {\n    if (!activePoint && activeStick) {\n      const rect = e.target.getBoundingClientRect();\n      for (let i in activeStick) {\n        const point = activeStick[i];\n        activeStick[i] = {\n          x: point.x + (e.movementX * width) / rect.width,\n          y: point.y + (e.movementY * height) / rect.height,\n        };\n      }\n      setSticks([...sticks]);\n    }\n  };\n\n  const touchStickDrag = (touchLocation) => {\n    if (!activePoint && activeStick) {\n      const stickReference = scalarProduct(sum(...activeStick), 1 / 2);\n      const adjustment = {\n        x: touchLocation.x - stickReference.x,\n        y: touchLocation.y - stickReference.y,\n      };\n      for (let i in activeStick) {\n        const point = activeStick[i];\n        activeStick[i] = sum(point, adjustment);\n      }\n      setSticks([...sticks]);\n    }\n  };\n\n  const touchHandler = (e) => {\n    const touch = e.touches[0];\n    const touchLocation = getMouseLoc(e, touch);\n    const selectedPoint = selectPoint(touchLocation);\n    if (!selectedPoint) {\n      selectStick(touchLocation);\n    }\n  };\n\n  const touchDragHandler = (e) => {\n    const touch = e.touches[0];\n    const touchLocation = getMouseLoc(e, touch);\n    pointDrag(touchLocation);\n    touchStickDrag(touchLocation);\n  };\n\n  const mouseMoveHandler = (e) => {\n    const mouseLocation = getMouseLoc(e);\n    pointDrag(mouseLocation);\n    mouseStickDrag(e);\n  };\n\n  const mouseDownHandler = (e) => {\n    select(getMouseLoc(e));\n  };\n\n  const clearSelection = () => {\n    setActiveStick(null);\n    setActivePoint(null);\n  };\n\n  const upHandler = () => {\n    updateWork();\n    clearSelection();\n  };\n\n  const draw = useCallback(\n    (ctx) => {\n      ctx.clearRect(0, 0, width, height);\n      ctx.beginPath();\n      ctx.lineWidth = stickWidth;\n      ctx.lineCap = \"round\";\n      ctx.strokeStyle = \"#ddd\";\n      for (let [initial, terminal] of startingConfiguration) {\n        ctx.moveTo(initial.x, initial.y);\n        ctx.lineTo(terminal.x, terminal.y);\n      }\n      ctx.stroke();\n      const pointSelection = getPointSelection(mouseLoc) || activePoint;\n      for (let [initial, terminal] of sticks) {\n        ctx.beginPath();\n        ctx.lineWidth = stickWidth;\n        ctx.strokeStyle = \"#000\";\n        ctx.moveTo(initial.x, initial.y);\n        ctx.lineTo(terminal.x, terminal.y);\n        ctx.stroke();\n      }\n      if (pointSelection) {\n        ctx.beginPath();\n        ctx.arc(\n          pointSelection.x,\n          pointSelection.y,\n          stickWidth * 2,\n          0,\n          2 * Math.PI\n        );\n        ctx.fillStyle = \"#7354f488\";\n        ctx.shadowBlur = stickWidth;\n        ctx.shadowColor = ctx.fillStyle;\n        ctx.fill();\n        ctx.shadowBlur = 0;\n        ctx.shadowColor = \"#000\";\n      } else {\n        const stickSelection = getStickSelection(mouseLoc) || activeStick;\n        if (stickSelection) {\n          const [initial, terminal] = stickSelection;\n          ctx.beginPath();\n          ctx.strokeStyle = \"#9edfe588\";\n          ctx.lineWidth = stickWidth * 3;\n          ctx.moveTo(initial.x, initial.y);\n          ctx.lineTo(terminal.x, terminal.y);\n          ctx.stroke();\n        }\n      }\n    },\n    [\n      sticks,\n      height,\n      width,\n      startingConfiguration,\n      mouseLoc,\n      getPointSelection,\n      getStickSelection,\n      activePoint,\n      activeStick,\n      stickWidth,\n    ]\n  );\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    draw(context);\n  }, [draw]);\n\n  return (\n    <canvas\n      id=\"mandelbrot-canvas\"\n      ref={canvasRef}\n      height={height}\n      width={width}\n      onTouchStart={touchHandler}\n      onTouchEnd={upHandler}\n      onTouchMove={touchDragHandler}\n      onMouseDown={mouseDownHandler}\n      onMouseUp={upHandler}\n      onMouseLeave={clearSelection}\n      onMouseMove={mouseMoveHandler}\n      className={\n        getStickSelection(mouseLoc) || getPointSelection(mouseLoc)\n          ? \"selecting\"\n          : \"\"\n      }\n    />\n  );\n}\n","import React, { useState, useMemo, useContext, useEffect } from \"react\";\nimport { UserContext } from \"../../login/user-context\";\nimport Canvas from \"./canvas\";\n\nexport default function Instance(props) {\n\tconst name = useMemo(() => props.name, [props.name]);\n\tconst sessionDataKey = useMemo(() => `matchstick-instance-data-${name}`, [\n\t\tname,\n\t]);\n\tconst sessionData = useMemo(\n\t\t() => JSON.parse(sessionStorage.getItem(sessionDataKey)),\n\t\t[sessionDataKey]\n\t);\n\tconst [data, setData] = useState(\n\t\tsessionData\n\t\t\t? sessionData\n\t\t\t: {\n\t\t\t\t\tsize: {},\n\t\t\t\t\twork: [],\n\t\t\t\t\tstartingConfiguration: [],\n\t\t\t\t\tstickLength: 0,\n\t\t\t\t\tselectionProximity: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t  }\n\t);\n\tconst [work, setWork] = useState(data.work);\n\tconst [saveStatus, setSaveStatus] = useState(sessionData ? \"saved\" : null);\n\tconst {\n\t\tuser: { token },\n\t} = useContext(UserContext);\n\tconst apiurl = `${process.env.REACT_APP_API_URL}/puzzles/matchstick/${name}`;\n\n\tuseEffect(() => {\n\t\tif (!sessionData) {\n\t\t\t(async () => {\n\t\t\t\tconst response = await fetch(apiurl, {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: { authorization: token },\n\t\t\t\t});\n\t\t\t\tif (response.ok) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst responseData = await response.json();\n\t\t\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\t\tsessionDataKey,\n\t\t\t\t\t\t\tJSON.stringify(responseData)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetData(responseData);\n\t\t\t\t\t\tsetWork(responseData.work);\n\t\t\t\t\t\tsetSaveStatus(\"saved\");\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t\t\t})();\n\t\t}\n\t}, [apiurl, token, sessionData, sessionDataKey]);\n\n\tuseEffect(() => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}/activepuzzle`;\n\t\t(async () => {\n\t\t\tawait fetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpuzzleName: \"matchstick\",\n\t\t\t\t\tpuzzleId: name,\n\t\t\t\t}),\n\t\t\t});\n\t\t})();\n\n\t\treturn () => {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: token,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\t}, [token, name]);\n\n\tconst updateWork = async (newWork = work) => {\n\t\tsetSaveStatus(\"saving\");\n\t\tconst response = await fetch(apiurl, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tauthorization: token,\n\t\t\t},\n\t\t\tbody: JSON.stringify({ puzzleData: newWork }),\n\t\t});\n\n\t\tconst newSessionData = JSON.parse(\n\t\t\tsessionStorage.getItem(sessionDataKey)\n\t\t);\n\t\tnewSessionData.work = newWork;\n\t\tsessionStorage.setItem(sessionDataKey, JSON.stringify(newSessionData));\n\n\t\tif (response.ok) setSaveStatus(\"saved\");\n\t\telse setSaveStatus(\"error\");\n\t};\n\n\tconst reset = () => {\n\t\tconst resetWork = data.startingConfiguration.map((stick) =>\n\t\t\tstick.map((endpoint) => {\n\t\t\t\treturn { ...endpoint };\n\t\t\t})\n\t\t);\n\t\tsetWork(resetWork);\n\t\tupdateWork(resetWork);\n\t};\n\n\treturn (\n\t\t<div className=\"matchstick puzzle-container\">\n\t\t\t<p className=\"description\">{data.description}</p>\n\t\t\t<Reset reset={reset} isactive={true} />\n\t\t\t<Canvas\n\t\t\t\tpuzzleData={data}\n\t\t\t\tsticks={work}\n\t\t\t\tsetSticks={setWork}\n\t\t\t\tupdateWork={updateWork}\n\t\t\t/>\n\t\t\t<div className=\"saving-indicator\">\n\t\t\t\t{saveStatus === \"saving\"\n\t\t\t\t\t? \"Saving...\"\n\t\t\t\t\t: saveStatus === \"error\"\n\t\t\t\t\t? \"An error occurred while saving.\"\n\t\t\t\t\t: saveStatus === \"saved\"\n\t\t\t\t\t? \"Saved.\"\n\t\t\t\t\t: \" \"}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction Reset({ reset, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={reset}\n\t\t\tclassName=\"reset nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1811 269q19-19 32-13t13 32v1472q0 \n\t\t\t26-13 32t-32-13l-710-710q-8-9-13-19v710q0 \n\t\t\t26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19 \n\t\t\t32-13t13 32v710q5-11 13-19z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from \"react\";\nimport Instance from \"./instance\";\n\nconst name = \"Matchstick Puzzles\";\nconst id = \"matchstick\";\n\nfunction ListPreview() {\n\treturn <div className=\"list-preview\">Find all matchtick puzzles here</div>;\n}\n\nconst instanceList = [\n\t{ instance: \"fish\", title: \"Fish\" },\n\t{ instance: \"squares1\", title: \"Squares 1\" },\n\t{ instance: \"squares2\", title: \"Squares 2\" },\n\t{ instance: \"squares3\", title: \"Squares 3\" },\n\t{ instance: \"donkey\", title: \"Donkey\" },\n\t{ instance: \"squares4\", title: \"Squares 4\" },\n\t{ instance: \"squares5\", title: \"Squares 5\" },\n];\n\nexport { name, id, ListPreview, Instance, instanceList };\n","//import * as Test from \"./test/index\";\nimport * as calcudoku from \"./calcudoku/index\";\nimport * as logic from \"./logic/index\";\nimport * as light from \"./light/index\";\nimport * as matchstick from \"./matchstick/index\";\n\nexport const puzzleList = [calcudoku, logic, light, matchstick];\n\nexport const potd = {\n\turi: \"/calcudoku/instructions\",\n\tPreview: POTDPreview,\n};\n\nfunction POTDPreview() {\n\treturn <div className=\"potd-preview\">Like Sudokus, but with a twist!</div>;\n}\n","import React, { useContext } from \"react\";\nimport { potd, puzzleList } from \"../puzzles/index\";\nimport { UserContext } from \"../login/user-context.js\";\n\nexport default function Home({ history }) {\n\tconst {\n\t\tuser: { token },\n\t} = useContext(UserContext);\n\treturn (\n\t\t<div className=\"dashboard-container\">\n\t\t\t<POTD history={history} token={token} />\n\t\t\t<div className=\"puzzle-list-container\">\n\t\t\t\t<h2>Individual Work</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t{puzzleList.map(\n\t\t\t\t\t\trenderPuzzleListing.bind(null, history, token)\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction POTD(props) {\n\tconst POTDPreview = potd.Preview;\n\treturn (\n\t\t<div\n\t\t\tclassName=\"potd-container\"\n\t\t\tonClick={() => props.history.push(potd.uri, { token: props.token })}\n\t\t>\n\t\t\t<h2>Puzzle of the Day</h2>\n\t\t\t<POTDPreview />\n\t\t</div>\n\t);\n}\n\nfunction renderPuzzleListing(history, token, puzzle) {\n\treturn (\n\t\t<li\n\t\t\tkey={puzzle.id}\n\t\t\tonClick={() => history.push(`/${puzzle.id}`, { token })}\n\t\t>\n\t\t\t<h3>{puzzle.name}</h3>\n\t\t\t{puzzle.ListPreview()}\n\t\t</li>\n\t);\n}\n","import React from \"react\";\n\nexport default function List({ history, instanceList, title, puzzleType }) {\n\tconst renderInstanceListing = (history, { instance, title }) => {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tkey={instance}\n\t\t\t\tonClick={() => history.push(`/${puzzleType}/${instance}`)}\n\t\t\t>\n\t\t\t\t<h3>{capitalize(title)}</h3>\n\t\t\t</li>\n\t\t);\n\t};\n\treturn (\n\t\t<div className=\"calcudoku-page-container\">\n\t\t\t<div className=\"instance-list-container\">\n\t\t\t\t{instanceList.length === 0 ? (\n\t\t\t\t\t<h2 className=\"fetching-indicator\">Loading...</h2>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2>{title}</h2>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{instanceList.map(\n\t\t\t\t\t\t\t\trenderInstanceListing.bind(null, history)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport List from \"./instance-list\";\n\nexport default function InstanceRouter(props) {\n\tconst { match, Instance, Instructions, id, name, instanceList } = props;\n\n\tconst renderInstanceRoute = (match, { instance }) => {\n\t\treturn (\n\t\t\t<Route\n\t\t\t\tkey={instance}\n\t\t\t\tpath={`${match.url}/${instance}`}\n\t\t\t\trender={(props) => <Instance {...props} name={instance} />}\n\t\t\t/>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route\n\t\t\t\tkey=\"instructions\"\n\t\t\t\tpath={`${match.url}/instructions`}\n\t\t\t\trender={(props) => <Instructions {...props} />}\n\t\t\t/>\n\t\t\t{instanceList.map(renderInstanceRoute.bind(null, match))}\n\t\t\t<Route\n\t\t\t\texact\n\t\t\t\tpath={match.url}\n\t\t\t\trender={(props) => (\n\t\t\t\t\t<List\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tinstanceList={instanceList}\n\t\t\t\t\t\ttitle={name}\n\t\t\t\t\t\tpuzzleType={id}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</Switch>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\n\nimport Login from \"./login/index\";\nimport { UserContext } from \"./login/user-context\";\nimport Home from \"./home/index\";\nimport { puzzleList } from \"./puzzles/index\";\nimport InstanceRouter from \"./puzzles/instance-router\";\n\nimport \"./stylesheets/index.css\";\n\nconst history = createBrowserHistory();\n\nconst backArrowPath = (\n\t<path\n\t\td={\n\t\t\t\"M1792 1024v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 \" +\n\t\t\t\"38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-\" +\n\t\t\t\"37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 \" +\n\t\t\t\"38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z\"\n\t\t}\n\t/>\n);\n\nfunction Routes() {\n\tconst sessionUser = JSON.parse(sessionStorage.getItem(\"mcub-student-user\"));\n\tconst [user, setUser] = useState(sessionUser);\n\tconst defaultContext = {\n\t\tuser,\n\t\tsetUser,\n\t};\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait fetchUserData(user);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t}, [user]);\n\n\treturn (\n\t\t<HashRouter history={history} basename=\"/\">\n\t\t\t<UserContext.Provider value={defaultContext}>\n\t\t\t\t{user ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<nav className=\"main-nav\">\n\t\t\t\t\t\t\t<ProfileBar\n\t\t\t\t\t\t\t\tstudent={user.student}\n\t\t\t\t\t\t\t\tsetUser={setUser}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" />\n\t\t\t\t\t\t\t\t<Route component={BackButton} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</nav>\n\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t{puzzleList.map(renderPuzzleRoute)}\n\t\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\n\t\t\t\t\t\t\t<Route path=\"/\" component={Home} />\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\n\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t<Redirect to=\"/login\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</Switch>\n\t\t\t\t)}\n\t\t\t</UserContext.Provider>\n\t\t</HashRouter>\n\t);\n}\n\nfunction BackButton({ history }) {\n\tconst prevURL = window.location.href.match(/#(.*)\\/[^/]+$/)[1];\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={() => history.push(prevURL)}\n\t\t\tclassName=\"back-button\"\n\t\t>\n\t\t\t{backArrowPath}\n\t\t</svg>\n\t);\n}\n\nfunction ProfileBar({ student, setUser }) {\n\treturn (\n\t\t<div className=\"profile-bar\">\n\t\t\t<span className=\"student-name\">\n\t\t\t\t{capitalize(student.first)} {capitalize(student.last)}\n\t\t\t</span>\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsetUser(null);\n\t\t\t\t\tsessionStorage.removeItem(\"mcub-student-user\");\n\t\t\t\t}}\n\t\t\t\tclassName=\"log-out\"\n\t\t\t>\n\t\t\t\tLog Out\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nfunction renderPuzzleRoute(puzzle) {\n\tconst { Instance, id, Instructions, name, instanceList } = puzzle;\n\treturn (\n\t\t<Route\n\t\t\tkey={puzzle.id}\n\t\t\tpath={`/${puzzle.id}`}\n\t\t\trender={(props) => (\n\t\t\t\t<InstanceRouter\n\t\t\t\t\t{...props}\n\t\t\t\t\tInstance={Instance}\n\t\t\t\t\tid={id}\n\t\t\t\t\tInstructions={Instructions}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinstanceList={instanceList}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nasync function fetchUserData({ token }) {\n\tconst url = `${process.env.REACT_APP_API_URL}/data`;\n\tconst response = await fetch(url, {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\tauthorization: token,\n\t\t},\n\t});\n\tif (response.ok) {\n\t\tconst data = await response.json();\n\t\tfor (let puzzleName in data) {\n\t\t\tfor (let puzzle of data[puzzleName]) {\n\t\t\t\tconst { puzzleId } = puzzle;\n\t\t\t\tconst instanceKey = `${puzzleName}-instance-data-${puzzleId}`;\n\t\t\t\tsessionStorage.setItem(instanceKey, JSON.stringify(puzzle));\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconsole.log(`HTTP error, status = ${response.status}`);\n\t}\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^.|\\W./g, (char) => char.toUpperCase());\n}\n\n//---------\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Routes />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}
(this["webpackJsonpstudent-app"]=this["webpackJsonpstudent-app"]||[]).push([[0],{146:function(e,t){},148:function(e,t){},162:function(e,t){},164:function(e,t){},192:function(e,t){},194:function(e,t){},195:function(e,t){},201:function(e,t){},203:function(e,t){},221:function(e,t){},223:function(e,t){},235:function(e,t){},238:function(e,t){},259:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Page",(function(){return T})),n.d(r,"name",(function(){return S})),n.d(r,"id",(function(){return L})),n.d(r,"ListPreview",(function(){return P}));var c={};n.r(c),n.d(c,"Page",(function(){return J})),n.d(c,"name",(function(){return D})),n.d(c,"id",(function(){return F})),n.d(c,"ListPreview",(function(){return H}));var a=n(9),s=n(0),o=n(1),i=n.n(o),u=n(133),l=n.n(u),d=n(45),j=n(6),b=n(136),f=n(5),h=n.n(f),p=n(11),O=n(134),v=n.n(O),m=i.a.createContext({user:null,setUser:function(){}});function x(e){var t=Object(o.useState)(),n=Object(a.a)(t,2),r=n[0],c=n[1],i=Object(o.useState)(),u=Object(a.a)(i,2),l=u[0],d=u[1],j=Object(o.useState)(!1),b=Object(a.a)(j,2),f=b[0],O=b[1],x=Object(o.useContext)(m).setUser,k=function(e,t){e(t.target.value)},w=Object(o.useCallback)(function(){var t=Object(p.a)(h.a.mark((function t(n){var c,a,s,o,i,u,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={first:r,last:l},a="".concat("https://immense-everglades-63113.herokuapp.com/api","/students")+(n?"":"/login"),t.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:if(!(s=t.sent).ok){t.next=23;break}return O(!1),t.prev=7,t.next=10,s.json();case 10:o=t.sent.token,i=v.a.decode(o),u=i.student,d={token:o,student:u},sessionStorage.setItem("mcub-student-user",JSON.stringify(d)),x(d),e.history.push("/"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),console.log(t.t0);case 21:t.next=24;break;case 23:404===s.status||403===s.status?O(s.status):console.log("HTTP error, status = "+s.status);case 24:case"end":return t.stop()}}),t,null,[[7,18]])})));return function(e){return t.apply(this,arguments)}}(),[r,l,e.history,x]),g=Object(o.useCallback)((function(e){"Enter"===e.key&&w(!1)}),[w]);return Object(o.useEffect)((function(){return window.addEventListener("keydown",g),function(){return window.removeEventListener("keydown",g)}}),[g]),Object(s.jsx)("div",{className:"login-container",children:Object(s.jsxs)("div",{className:"login-window",children:[f?Object(s.jsx)("p",{className:"login-error",children:404===f?"User not found. Please try again or create a new user.":403===f?"User already exists.":"An error occurred while attempting to log in."}):null,Object(s.jsxs)("div",{className:"name-container first",children:[Object(s.jsx)("label",{htmlFor:"firstname",children:"First Name:"}),Object(s.jsx)("input",{type:"text",name:"firstname",id:"firstname",onChange:k.bind(null,c)})]}),Object(s.jsxs)("div",{className:"name-container last",children:[Object(s.jsx)("label",{htmlFor:"lastname",children:"Last Name:"}),Object(s.jsx)("input",{type:"text",name:"lasname",id:"lasname",onChange:k.bind(null,d)})]}),Object(s.jsx)("button",{className:"create-student",onClick:function(){return w(!0)},children:"Create"}),Object(s.jsx)("button",{className:"login-student",onClick:function(){return w(!1)},children:"Log-In"})]})})}var k=n(17);function w(e){var t=e.history,n=e.instanceList;return Object(s.jsx)("div",{className:"calcudoku-page-container",children:Object(s.jsxs)("div",{className:"instance-list-container",children:[Object(s.jsx)("h2",{children:"Calcudokus"}),Object(s.jsx)("ul",{children:n?n.map(g.bind(null,t)):null})]})})}function g(e,t){var n,r=t.instance,c=t.title;return Object(s.jsx)("li",{onClick:function(){return e.push("/calcudoku/".concat(r))},children:Object(s.jsx)("h3",{children:(n=c,n.replace(/^./,(function(e){return e.toUpperCase()})))})},r)}var z=n(73);function y(e){var t=e.name,n=Object(o.useState)(null),r=Object(a.a)(n,2),c=r[0],i=r[1],u=Object(o.useState)(null),l=Object(a.a)(u,2),d=l[0],j=l[1],b=Object(o.useState)(null),f=Object(a.a)(b,2),O=f[0],v=f[1],x=Object(o.useContext)(m).user.token,k="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/calcudoku/").concat(t);Object(o.useEffect)((function(){Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"GET",headers:{authorization:x}});case 2:if(!(t=e.sent).ok){e.next=18;break}return e.prev=4,e.next=7,t.json();case 7:n=e.sent,i(n.size),j(N(n)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),j([]),console.log(e.t0);case 16:e.next=19;break;case 18:console.log("HTTP error, status = "+t.status);case 19:case"end":return e.stop()}}),e,null,[[4,12]])})))()}),[k,x]),Object(o.useEffect)((function(){var e="".concat("https://immense-everglades-63113.herokuapp.com/api","/activepuzzle");return Object(p.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",authorization:x},body:JSON.stringify({puzzleName:"calcudoku",puzzleId:t})});case 2:r=n.sent,console.log(r.status);case 4:case"end":return n.stop()}}),n)})))(),function(){fetch(e,{method:"DELETE",headers:{authorization:x}})}}),[x,t]);var w=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.map((function(e){return{col:e.col,row:e.row,value:e.value}})),e.next=3,fetch(k,{method:"PUT",headers:{"Content-Type":"application/json",authorization:x},body:JSON.stringify({puzzleData:t})});case 3:n=e.sent,console.log(n.status);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t=e.key;if(O){if(!isNaN(t)&&1<=t&&t<=c)O.value=t;else{var n=O.col,r=O.row;switch(t){case"Backspace":case"Delete":O.value="";break;case"ArrowUp":return void v(d.find(E({col:n-1,row:r}))||O);case"ArrowDown":return void v(d.find(E({col:n+1,row:r}))||O);case"ArrowLeft":return void v(d.find(E({col:n,row:r-1}))||O);case"ArrowRight":return void v(d.find(E({col:n,row:r+1}))||O);default:return}}j(Object(z.a)(d)),w()}else["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)&&v(d.find(E({col:0,row:0})))};Object(o.useEffect)((function(){return window.addEventListener("keydown",g),function(){return window.removeEventListener("keydown",g)}}));var y=function(e){return Object(s.jsx)("button",{className:"number-select",onClick:function(){O.value=e,j(Object(z.a)(d)),w()},children:e},"num".concat(e))};return Object(s.jsx)("div",{children:d?Object(s.jsxs)("div",{className:"puzzle-container",size:c,children:[Object(s.jsx)("div",{className:"grid-container",size:c,children:d.map((function(e){var t="calcudoku-square "+e.neighbors.join(" ")+(e===O?" active":"");return Object(s.jsxs)("div",{className:t,onClick:function(){return v(e)},children:[Object(s.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(s.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}))}),Object(s.jsx)("div",{className:"number-select-container",children:new Array(c).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return y(r+1)}))})]}):null})}function N(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];var s=c[1],o=Math.floor(s/t),i=s%t,u=E({col:o,row:i}),l=r.find(u),d=n.find((function(e){return e.squares.find(u)})),j=C({col:o,row:i},d),b=d.squares.every((function(e){return e.col>=o&&(e.row>=i||e.col>o)})),f=b?d.result:null,h=b?d.operation:null,p=l?l.value:null;return{col:o,row:i,value:p,neighbors:j,result:f,operation:h}}))}function C(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var c in r){var a=E(r[c]);t.squares.find(a)&&n.push(c)}return n}function E(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}function T(e){var t=Object(o.useState)([]),n=Object(a.a)(t,2),r=n[0],c=n[1],i=Object(o.useContext)(m).user.token,u=e.match;Object(o.useEffect)((function(){Object(p.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/calcudoku/"),e.next=3,fetch(t,{method:"GET",headers:{authorization:i}});case 3:if(!(n=e.sent).ok){e.next=17;break}return e.prev=5,e.next=8,n.json();case 8:r=e.sent,c(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:e.next=18;break;case 17:console.log("HTTP error, status = "+n.status);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})))()}),[i]);return Object(s.jsxs)(j.d,{children:[r?r.map(function(e,t){var n=t.instance;return Object(s.jsx)(j.b,{path:"".concat(e.url,"/").concat(n),render:function(e){return Object(s.jsx)(y,Object(k.a)(Object(k.a)({},e),{},{name:n}))}},n)}.bind(null,u)):null,Object(s.jsx)(j.b,{exact:!0,path:u.url,render:function(e){return Object(s.jsx)(w,Object(k.a)(Object(k.a)({},e),{},{instanceList:r}))}})]})}var S="Calcudokus",L="calcudoku";function P(){return Object(s.jsx)("div",{className:"list-preview",children:"Find all calcudokus here"})}function U(e){var t=e.history,n=e.instanceList;return Object(s.jsx)("div",{className:"logic-puzzles page-container",children:Object(s.jsxs)("div",{className:"instance-list-container",children:[Object(s.jsx)("h2",{children:"Logic Puzzles"}),Object(s.jsx)("ul",{children:n?n.map(A.bind(null,t)):null})]})})}function A(e,t){var n,r=t.instance,c=t.title;return Object(s.jsx)("li",{onClick:function(){return e.push("/logic/".concat(r))},children:Object(s.jsx)("h3",{children:(n=c,n.replace(/^./,(function(e){return e.toUpperCase()})))})},r)}function I(e){var t=e.name,n=Object(o.useState)(""),r=Object(a.a)(n,2),c=r[0],i=r[1],u=Object(o.useState)(""),l=Object(a.a)(u,2),d=l[0],j=l[1],b=Object(o.useState)(30),f=Object(a.a)(b,2),O=f[0],v=f[1],x=Object(o.useContext)(m).user.token,k="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/logic/").concat(t);Object(o.useEffect)((function(){Object(p.a)(h.a.mark((function e(){var t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"GET",headers:{authorization:x}});case 2:if(!(t=e.sent).ok){e.next=19;break}return e.prev=4,e.next=7,t.json();case 7:n=e.sent,r=n.description,c=n.work,i(r),j(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:e.next=20;break;case 19:console.log("HTTP error, status = "+t.status);case 20:case"end":return e.stop()}}),e,null,[[4,14]])})))()}),[k,x,j]),Object(o.useEffect)((function(){var e="".concat("https://immense-everglades-63113.herokuapp.com/api","/activepuzzle");return Object(p.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",authorization:x},body:JSON.stringify({puzzleName:"logic",puzzleId:t})});case 2:r=n.sent,console.log(r.status);case 4:case"end":return n.stop()}}),n)})))(),function(){fetch(e,{method:"DELETE",headers:{authorization:x}})}}),[x,t]);var w=Object(o.useCallback)(Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"PUT",headers:{"Content-Type":"application/json",authorization:x},body:JSON.stringify({puzzleData:d})});case 2:t=e.sent,console.log(t.status);case 4:case"end":return e.stop()}}),e)}))),[x,d,k]);return Object(o.useEffect)((function(){var t=e.history.listen(w),n=setTimeout(w,3e3);return function(){clearTimeout(n),t()}}),[w,e.history]),Object(o.useEffect)((function(){return window.addEventListener("beforeunload",w),function(){window.removeEventListener("beforeunload",w)}}),[w]),Object(o.useEffect)((function(){0===O&&(v(30),w())}),[O,w]),Object(o.useEffect)((function(){var e=setInterval((function(){return v((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[v]),Object(s.jsxs)("div",{className:"logic instance",children:[Object(s.jsx)("p",{className:"puzzle-description",children:c}),Object(s.jsx)("textarea",{className:"work",onChange:function(e){j(e.target.value)},value:d,placeholder:"Enter your solution or any notes here!"})]})}function J(e){var t=Object(o.useState)([]),n=Object(a.a)(t,2),r=n[0],c=n[1],i=Object(o.useContext)(m).user.token,u=e.match;Object(o.useEffect)((function(){Object(p.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/logic"),e.next=3,fetch(t,{method:"GET",headers:{authorization:i}});case 3:if(!(n=e.sent).ok){e.next=17;break}return e.prev=5,e.next=8,n.json();case 8:r=e.sent,c(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:e.next=18;break;case 17:console.log("HTTP error, status = "+n.status);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})))()}),[i]);return Object(s.jsxs)(j.d,{children:[r?r.map(function(e,t){var n=t.instance;return Object(s.jsx)(j.b,{path:"".concat(e.url,"/").concat(n),render:function(e){return Object(s.jsx)(I,Object(k.a)(Object(k.a)({},e),{},{name:n}))}},n)}.bind(null,u)):null,Object(s.jsx)(j.b,{exact:!0,path:u.url,render:function(e){return Object(s.jsx)(U,Object(k.a)(Object(k.a)({},e),{},{instanceList:r}))}})]})}var D="Logic Puzzles",F="logic";function H(){return Object(s.jsx)("div",{className:"list-preview",children:"Find all logic puzzles here"})}var q=[r,c],G="/calcudoku/4x4beginner1",B=function(){return Object(s.jsx)("div",{className:"potd-preview",children:"Like Sudokus, but with a twist!"})};function M(e){var t=e.history,n=Object(o.useContext)(m).user.token;return Object(s.jsxs)("div",{className:"dashboard-container",children:[Object(s.jsx)(R,{history:t,token:n}),Object(s.jsxs)("div",{className:"puzzle-list-container",children:[Object(s.jsx)("h2",{children:"Individual Work"}),Object(s.jsx)("ul",{children:q.map(W.bind(null,t,n))})]})]})}function R(e){var t=B;return Object(s.jsxs)("div",{className:"potd-container",onClick:function(){return e.history.push(G,{token:e.token})},children:[Object(s.jsx)("h2",{children:"Puzzle of the Day"}),Object(s.jsx)(t,{})]})}function W(e,t,n){return Object(s.jsxs)("li",{onClick:function(){return e.push("/".concat(n.id),{token:t})},children:[Object(s.jsx)("h3",{children:n.name}),n.ListPreview()]},n.id)}n(259);var K=Object(b.a)();function Q(){var e=JSON.parse(sessionStorage.getItem("mcub-student-user")),t=Object(o.useState)(e),n=Object(a.a)(t,2),r=n[0],c=n[1],i={user:r,setUser:c};return Object(s.jsx)(d.a,{history:K,basename:"puzzle-app-student",children:Object(s.jsx)(m.Provider,{value:i,children:r?Object(s.jsxs)("div",{children:[Object(s.jsxs)("nav",{className:"main-nav",children:[Object(s.jsx)(V,{history:K}),Object(s.jsx)(X,{student:r.student,setUser:c})]}),Object(s.jsxs)(j.d,{children:[q.map(Y),Object(s.jsx)(j.b,{path:"/login",component:x}),Object(s.jsx)(j.b,{path:"/",component:M})]})]}):Object(s.jsxs)(j.d,{children:[Object(s.jsx)(j.b,{path:"/login",component:x}),Object(s.jsx)(j.b,{path:"/",children:Object(s.jsx)(j.a,{to:"/login"})})]})})})}function V(e){var t=e.history;return Object(s.jsx)("button",{className:"back-button",onClick:t.back,children:"Back"})}function X(e){var t=e.student,n=e.setUser;return Object(s.jsxs)("div",{className:"profile-bar",children:[Object(s.jsxs)("span",{className:"student-name",children:[Z(t.first)," ",Z(t.last)]}),Object(s.jsx)("button",{onClick:function(){n(null),sessionStorage.removeItem("mcub-student-user")},className:"log-out",children:"Log Out"})]})}function Y(e){return Object(s.jsx)(j.b,{path:"/".concat(e.id),component:e.Page},e.id)}function Z(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}l.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(Q,{})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.7f7c15be.chunk.js.map